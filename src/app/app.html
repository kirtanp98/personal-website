<div class="page-shell">
  <div class="backdrop" aria-hidden="true"></div>

  <header class="topbar">
    <a class="brand" href="#top">{{ profile.name }}</a>

    <nav class="section-nav" aria-label="Section navigation">
      @for (section of sections; track trackBySection($index, section)) {
        <a [href]="'#' + section.id">{{ section.title }}</a>
      }
    </nav>

    <button type="button" class="theme-toggle" (click)="toggleTheme()">
      {{ isDark() ? 'Light' : 'Dark' }}
    </button>
  </header>

  <main id="top" class="content">
    <section class="hero">
      <p class="eyebrow">Portfolio</p>
      <h1>{{ profile.name }}</h1>
      <p class="hero-role">{{ profile.title }}</p>
      <p class="hero-location">{{ profile.location }}</p>

      <div class="hero-links">
        <a [href]="'mailto:' + profile.email">{{ profile.email }}</a>
        <span>•</span>
        <a [href]="'tel:' + profile.phone">{{ profile.phone }}</a>
        <span>•</span>
        <a href="https://www.kirtanpatel.me" target="_blank" rel="noopener">{{ profile.website }}</a>
      </div>

      <div class="social-links">
        @for (link of socialLinks; track link.label) {
          <a [href]="link.url" target="_blank" rel="noopener">{{ link.label }}</a>
        }
      </div>
    </section>

    @for (section of sections; track trackBySection($index, section)) {
      <section class="resume-section" [id]="section.id">
        <div class="section-header">
          <h2>{{ section.title }}</h2>
          <p>{{ section.blurb }}</p>
        </div>

        <div class="item-grid">
          @for (item of section.items; track trackByItem($index, item)) {
            <article class="item-card" [attr.data-accent]="sectionPalette[$index % sectionPalette.length]">
              <div class="item-head">
                <div>
                  <h3>{{ item.title }}</h3>
                  @if (item.subtitle) {
                    <p class="subtitle">{{ item.subtitle }}</p>
                  }
                </div>

                <div class="meta">
                  @if (item.timeframe) {
                    <p>{{ item.timeframe }}</p>
                  }
                  @if (item.location) {
                    <p>{{ item.location }}</p>
                  }
                </div>
              </div>

              @if (item.summary) {
                <p class="summary">{{ item.summary }}</p>
              }

              @if (item.bullets?.length) {
                <ul>
                  @for (bullet of item.bullets; track bullet) {
                    <li>{{ bullet }}</li>
                  }
                </ul>
              }

              @if (item.tags?.length) {
                <div class="chip-row">
                  @for (tag of item.tags; track tag) {
                    <span class="chip">{{ tag }}</span>
                  }
                </div>
              }

              @if (item.metrics?.length) {
                <div class="metric-row">
                  @for (metric of item.metrics; track metric) {
                    <span>{{ metric }}</span>
                  }
                </div>
              }

              @if (item.link) {
                <a class="inline-link" [href]="item.link.url" target="_blank" rel="noopener">
                  {{ item.link.label }}
                </a>
              }
            </article>
          }
        </div>
      </section>
    }
  </main>
</div>
